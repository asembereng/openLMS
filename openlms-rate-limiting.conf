# Rate Limiting Configuration for openLMS
# This file should be included in the main nginx.conf http block
# Add this line to /etc/nginx/nginx.conf inside the http block:
# include /etc/nginx/conf.d/openlms-rate-limiting.conf;

# Rate limiting zones for openLMS business operations
limit_req_zone $binary_remote_addr zone=pos_orders_api:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=api_general:10m rate=30r/s;
limit_req_zone $binary_remote_addr zone=admin_access:10m rate=5r/s;
limit_req_zone $binary_remote_addr zone=login_attempts:10m rate=5r/m;

# Usage in site configuration:
# location /api/orders/ {
#     limit_req zone=pos_orders_api burst=20 nodelay;
#     # ... rest of configuration
# }
#
# location /api/ {
#     limit_req zone=api_general burst=50 nodelay;
#     # ... rest of configuration
# }
#
# location /admin/ {
#     limit_req zone=admin_access burst=10 nodelay;
#     # ... rest of configuration
# }
#
# location /accounts/login/ {
#     limit_req zone=login_attempts burst=3 nodelay;
#     # ... rest of configuration
# }
